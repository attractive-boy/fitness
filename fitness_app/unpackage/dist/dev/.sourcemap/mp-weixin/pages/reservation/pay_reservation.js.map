{"version":3,"sources":["uni-app:///main.js","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?329f","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?be18","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?eaf1","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?d512","uni-app:///pages/reservation/pay_reservation.vue","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?5ad2","webpack:///C:/project/jiedan/fitness/fitness_app/pages/reservation/pay_reservation.vue?6899"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","orderId","times","currentTimes","timeData","startTime","endTime","chooseTime","computed","onLoad","methods","handlerReservation","uni","icon","title","dateList","val","item","list","res","setTimeout","content","success","url","duration","console","setTimes","tomorrow","date","setReservationDate","sortedKeys","goPayPage","goCards","currentChoose","newTodayData","tomorrowData","todayMin","tmrMin","tmrMax","todayMax","endDate"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,wBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwI;AACxI;AACmE;AACL;AACsC;;;AAGpG;AACuM;AACvM,gBAAgB,2MAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kLAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtEA;AAAA;AAAA;AAAA;AAAgyB,CAAgB,+wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACoHpzB;AACA;AAKA;AACA;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC,4BACA,mDACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAEAC,wCACAA;kBAAA;kBAAA;gBAAA;gBAEAA;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAGA;gBACAC;gBACAV;gBACAC;gBACA;kBACAU;oBACA;oBACA;sBACAD;wBACAV;wBACAC,SACAW;sBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA,OACA;kBACAC;kBACAjB;gBACA;cAAA;gBAHAkB;gBAIA;kBACAP;oBACAC;oBACAC;kBACA;kBACAM;oBACA;oBACA;kBACA;gBACA;kBACAR;oBACAE;oBACAO;oBACAC;sBAAA;sBACA;wBACAV;0BACAW;wBACA;sBACA;oBACA;kBACA;gBACA;kBACAX;oBACAC;oBACAC;oBACAU;kBACA;gBACA;gBACAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA;MACA;MACA;MACAC;MACA;QACAC;QACAd;MACA;MACA;QACAc;QACAd;MACA;IACA;IACA;IACAe;MAAA;MACA;MACA;MACA;MACAF;;MAEA;MACA;MACA;;MAEA;MACA,iCACA;QACAC;MACA,GACA;QACAA;MACA,EACA;QACA;QACA;QACA;QACA;QACAE;UACA;UACA;UACA;UACAX;YACA;YACA;YACA;YACAF;YACAA;YACAA;YACA;cACAA;cACAA;YACA;YACA;cACAA;YACA;cACAA;YACA;YACAC;UACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAa;MACAnB;QACAW;MACA;IACA;IACAS;MACA;QACApB;UACAC;UACAC;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;QACAmB;QACA;QACA;UACA;UACA;UACA;UACA;YACAjC;UACA;UACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;UACA;YACA,8CACAkC;UACA;UACA;UACA;UACA;UACA;YACAD;UACA;QACA;MACA;QACA;UAAA;QAAA;QACA;QACA;UACA;QACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA,aACAE;MACA,aACAA;MAEA,gBACAC,wBACA,6BACAC,sBACA,2BACA;MACA,cACAC,uBACA,2BACAC,yBACA,6BACA;MACA;QACA;QACA;MACA;MACA;MACAC;MACA;QACA5B;UACAC;UACAC;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjXA;AAAA;AAAA;AAAA;AAAm/C,CAAgB,84CAAG,EAAC,C;;;;;;;;;;;ACAvgD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/reservation/pay_reservation.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/reservation/pay_reservation.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay_reservation.vue?vue&type=template&id=77a41789&scoped=true&\"\nvar renderjs\nimport script from \"./pay_reservation.vue?vue&type=script&lang=js&\"\nexport * from \"./pay_reservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay_reservation.vue?vue&type=style&index=0&id=77a41789&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77a41789\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/reservation/pay_reservation.vue\"\nexport default component.exports","export * from \"-!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay_reservation.vue?vue&type=template&id=77a41789&scoped=true&\"","var components\ntry {\n  components = {\n    MNavbar: function () {\n      return import(\n        /* webpackChunkName: \"components/MNavbar/MNavbar\" */ \"@/components/MNavbar/MNavbar.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-parse/u-parse\" */ \"@/uni_modules/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.timeData[_vm.currentTimes], function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = !(item.status == 3)\n      ? _vm.chooseTime[_vm.currentTimes].includes(index)\n      : null\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, index) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        index = _temp2.index\n      var _temp, _temp2\n      _vm.currentTimes = index\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay_reservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay_reservation.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <MNavbar\n      title=\"预约\"\n      titleStyle=\"color:#333;\"\n      bgColor=\"#fff\"\n      leftIconColor=\"#333\" />\r\n\r\n    <view class=\"time_box\">\r\n      <view\n        class=\"time_item\"\n        @tap=\"currentTimes = index\"\n        :class=\"currentTimes === index ? 'choose_item' : ''\"\r\n        v-for=\"(item, index) in times\"\n        :key=\"index\">\r\n        <view>{{ item.title || \"\" }}</view>\r\n        <view>{{ item.date || \"\" }}</view>\r\n        <view class=\"bottom_line\"></view>\r\n      </view>\r\n    </view>\r\n    <!-- 预约操作 -->\r\n    <view class=\"info_box\">\r\n      <view class=\"title_box\" style=\"margin-bottom: 10rpx\">\r\n        <view class=\"line\"></view>\r\n        预约概况\r\n      </view>\r\n      <view class=\"body_box\">\r\n        <template v-for=\"(item, index) in timeData[currentTimes]\">\r\n          <view\r\n            v-if=\"item.status == 3\"\r\n            @tap=\"goCards(item, index)\"\r\n            class=\"item_box choose_item2\"\r\n            :key=\"index\">\r\n            <view class=\"time_text\">{{ item.oriTime || \"\" }}</view>\r\n            <view class=\"item_text1\">已预约</view>\r\n            <view>\r\n              <view class=\"item_text1\">已约人数：{{ item.num || \"0\" }}</view>\r\n            </view>\r\n          </view>\r\n          <view\r\n            v-else-if=\"chooseTime[currentTimes].includes(index)\"\r\n            @tap=\"goCards(item, index)\"\r\n            class=\"item_box choose_item\"\r\n            :key=\"index\">\r\n            <view class=\"time_text\">{{ item.oriTime || \"\" }}</view>\r\n            <view class=\"item_text1\">可预约</view>\r\n            <view>\r\n              <view class=\"item_text1\">已约人数：{{ item.num || \"0\" }}</view>\r\n            </view>\r\n          </view>\r\n          <view\r\n            v-else-if=\"!item.available\"\r\n            @tap=\"goCards(item, index)\"\r\n            class=\"item_box disable_itme\"\r\n            :key=\"index\">\r\n            <view class=\"time_text\">{{ item.oriTime || \"\" }}</view>\r\n\r\n            <view class=\"item_text1\">\r\n              {{ item.availableText || \"\" }}\r\n            </view>\r\n            <view>\r\n              <view class=\"item_text1\">已约人数：{{ item.num || \"0\" }}</view>\r\n            </view>\r\n          </view>\r\n          <view\r\n            v-else\r\n            @tap=\"goCards(item, index)\"\r\n            class=\"item_box\"\r\n            :key=\"index\">\r\n            <view class=\"time_text\">{{ item.oriTime || \"\" }}</view>\r\n            <view class=\"item_text1\">可预约</view>\r\n            <view>\r\n              <view class=\"item_text1\">已约人数：{{ item.num || \"0\" }}</view>\r\n            </view>\r\n          </view>\r\n        </template>\r\n      </view>\r\n    </view>\r\n    <view class=\"info_box\">\r\n      <view class=\"title_box\" style=\"margin-bottom: 10rpx\">\r\n        <view class=\"line\"></view>\r\n        预约注意事项\r\n      </view>\r\n      <view class=\"u-content\">\r\n        <u-parse\r\n          :content=\"shopInfo.reservation\"\r\n          :tagStyle=\"{ fontSize: '22rpx' }\"></u-parse>\r\n      </view>\r\n    </view>\r\n    <view style=\"height: 300rpx\"></view>\r\n    <view class=\"but_box\">\r\n      <u-button\n        shape=\"circle\"\n        text=\"预约\"\r\n        @click=\"handlerReservation\"\n        :custom-style=\"{\r\n          background: '#333',\r\n          border: 'unset',\r\n          color: '#fff',\r\n          height: '80rpx',\r\n        }\"></u-button>\r\n      <u-button\r\n        text=\"跳过\"\r\n        @click=\"goPayPage()\"\r\n        shape=\"circle\"\r\n        :custom-style=\"{\r\n          color: '#333',\r\n          marginTop: '25rpx',\r\n          boxShadow: '#ccc 0 0 20rpx',\r\n          borderColor: '#fff',\r\n        }\"></u-button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { createOrderApi } from \"@/apis/order.js\";\r\nimport {\n  getRsvDateApi,\n  handlerRsvApi,\n  createRsvApi,\n} from \"@/apis/reservation.js\";\r\nimport { formatTimestamp, isDiffOver2Hours } from \"@/utils/utils\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderId: undefined,\r\n      times: [],\r\n      currentTimes: 0, // 上面时间选项\r\n      timeData: [], // 可预约时间总览\r\n      startTime: null, // 开始时间\r\n      endTime: null, // 结束时间\r\n      chooseTime: [[], []],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"systemModel\", [\"shopInfo\"]),\r\n  },\r\n  onLoad(options) {\r\n    this.orderId = options.orderId;\r\n    this.setReservationDate();\r\n    this.setTimes();\r\n  },\r\n  methods: {\r\n    // 预约操作\r\n    async handlerReservation() {\r\n      if (\n        uni.$u.test.isEmpty(this.startTime) ||\n        uni.$u.test.isEmpty(this.endTime)\n      ) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: \"请选择预约时间\",\r\n        });\r\n        return;\r\n      }\r\n      // 提取中间时间段\r\n      let dateList = [];\r\n      let startTime = new Date(this.startTime);\r\n      let endTime = new Date(this.endTime);\r\n      this.timeData.forEach((val) => {\r\n        val.forEach((item) => {\r\n          let itemDate = new Date(item.oriDate + \" \" + item.oriTime + \":00\");\r\n          if (itemDate >= startTime && itemDate <= endTime) {\r\n            dateList.push({\r\n              startTime: item.oriDate + \" \" + item.oriTime + \":00\",\r\n              endTime:\n                item.oriDate + \" \" + item.oriTime.split(\":\")[0] + \":59:59\",\r\n            });\r\n          }\r\n        });\r\n      });\r\n      let res = await handlerRsvApi({\r\n        list: dateList,\r\n        orderId: this.orderId,\r\n      });\r\n      if (res.code == 200) {\r\n        uni.showToast({\r\n          icon: \"success\",\r\n          title: \"预约成功\",\r\n        });\r\n        setTimeout(() => {\r\n          this.setReservationDate();\r\n          this.goPayPage();\r\n        }, 500);\r\n      } else if (res.code == 50001) {\r\n        uni.showModal({\r\n          title: \"温馨提示\",\r\n          content: \"暂无可用订单，是否前去购买\",\r\n          success: ({ confirm }) => {\r\n            if (confirm) {\r\n              uni.navigateTo({\r\n                url: \"/pages/cards/cards\",\r\n              });\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: res.msg,\r\n          duration: 2000,\r\n        });\r\n      }\r\n      console.log(dateList);\r\n    },\r\n    // 设置分类时间\r\n    setTimes() {\r\n      let today = new Date();\r\n      let tomorrow = new Date();\r\n      // 确保明天的日期增加一天\r\n      tomorrow.setDate(tomorrow.getDate() + 1);\r\n      this.times.push({\r\n        date: formatTimestamp(today, 0),\r\n        title: \"今天\",\r\n      });\r\n      this.times.push({\r\n        date: formatTimestamp(tomorrow, 0),\r\n        title: \"明天\",\r\n      });\r\n    },\r\n    // 设置可预约时间\r\n    setReservationDate() {\r\n      let today = new Date();\r\n      let tomorrow = new Date();\r\n      // 确保明天的日期增加一天\r\n      tomorrow.setDate(tomorrow.getDate() + 1);\r\n\r\n      // 格式化日期字符串\r\n      let todayStr = formatTimestamp(today, 0);\r\n      let tomorrowStr = formatTimestamp(tomorrow, 0);\r\n\r\n      // 调用 API 获取预约数据\r\n      getRsvDateApi([\n        {\r\n          date: todayStr,\r\n        },\r\n        {\r\n          date: tomorrowStr,\r\n        },\r\n      ]).then((res) => {\r\n        // 获取返回对象的键并排序\r\n        const sortedKeys = Object.keys(res ?? {}).sort();\r\n        let curHours = new Date().getHours();\r\n        // 遍历排序后的键\r\n        sortedKeys.forEach((key) => {\r\n          let prefix = key === todayStr ? \"今天 \" : \"明天 \";\r\n          let list = [];\r\n          // 遍历日期对应的时间段并添加时间前缀\r\n          res[key].forEach((item) => {\r\n            let rangeTime = item.time.split(\"-\");\r\n            let newKey = key.replace(/-/g, \"/\");\r\n            let hours = new Date(newKey + \" \" + rangeTime[0]).getHours();\r\n            item.oriTime = item.time;\r\n            item.oriDate = newKey;\r\n            item.time = prefix + item.time;\r\n            if (!((hours > curHours && key === todayStr) || key !== todayStr)) {\r\n              item.available = false;\r\n              item.availableText = \"超过预约时间\";\r\n            }\r\n            if (item.status == 3) {\r\n              item.availableText = \"已预约\";\r\n            } else if (item.status == 2) {\r\n              item.availableText = \"已约满\";\r\n            }\r\n            list.push(item);\r\n          });\r\n          // 将数据推入 dataList\r\n          this.timeData.push(list);\r\n        });\r\n      });\r\n    },\r\n    // 前往支付\r\n    goPayPage() {\r\n      uni.navigateTo({\r\n        url: \"/pages/shop/pay?orderId=\" + this.orderId,\r\n      });\r\n    },\r\n    goCards(item, index) {\r\n      if (!item.available) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: item.availableText,\r\n        });\r\n        return;\r\n      }\r\n      // 当前数据\r\n      let currentChoose = this.chooseTime[this.currentTimes];\r\n      // 判断是今天还是明天\r\n      const isFirstDay = this.currentTimes === 0;\r\n      if (this.currentTimes == 0) {\r\n        this.chooseTime.splice(1, 1, []);\r\n      }\r\n      // 元素中没有数组是加入操作\r\n      if (!currentChoose.includes(index)) {\r\n        // 加入操作\r\n        currentChoose.push(index);\r\n        // 选定范围，批量插入\r\n        if (currentChoose.length >= 2) {\r\n          const minValue = Math.min(...currentChoose);\r\n          const maxValue = Math.max(...currentChoose);\r\n          let data = [];\r\n          for (let i = minValue; i <= maxValue; i++) {\r\n            data.push(i);\r\n          }\r\n          this.chooseTime.splice(this.currentTimes, 1, data);\r\n        }\r\n        // 当点击明天时，需判断今天数组中是否有数据\r\n        let todayData = this.chooseTime[0];\r\n        if (this.currentTimes === 1 && todayData.length > 0) {\r\n          // 设置今天数据\r\n          const todayMinValue = Math.min(...todayMinValue);\r\n          let newTodayData = [];\r\n          this.timeData[0].forEach((item, index) => {\r\n            if (item.available && todayMinValue <= index)\n              newTodayData.push(index);\r\n          });\r\n          this.chooseTime.splice(0, 1, newTodayData);\r\n          // 设置明天数据\r\n          const minValue = Math.min(...currentChoose);\r\n          for (let i = 0; i < minValue; i++) {\r\n            currentChoose.push(i);\r\n          }\r\n        }\r\n      } else {\r\n        let data = currentChoose.filter((item) => item < index);\r\n        this.chooseTime.splice(this.currentTimes, 1, data);\r\n        if (this.currentTimes == 0) {\r\n          this.chooseTime.splice(1, 1, []);\r\n        }\r\n      }\r\n      // 找到最大预约时间和最小预约时间\r\n      let todayData = this.chooseTime[0];\n      let tomorrowData = this.chooseTime[1];\n\n      let todayMin = todayData.length > 0 ? Math.min(...todayData) : Infinity;\n      let todayMax = todayData.length > 0 ? Math.max(...todayData) : -Infinity;\n      let tmrMin =\n        tomorrowData.length > 0 ? Math.min(...tomorrowData) : Infinity;\n      let tmrMax =\n        tomorrowData.length > 0 ? Math.max(...tomorrowData) : -Infinity;\n\n      let startItem =\n        todayMin !== Infinity\n          ? this.timeData[0][todayMin]\n          : tmrMin !== Infinity\n          ? this.timeData[1][tmrMin]\n          : null;\n      let endItem =\n        tmrMax !== -Infinity\n          ? this.timeData[1][tmrMax]\n          : todayMax !== -Infinity\n          ? this.timeData[0][todayMax]\n          : null;\r\n      if (startItem && endItem) {\r\n        this.startTime = startItem.oriDate + \" \" + startItem.oriTime + \":00\";\r\n        this.endTime = endItem.oriDate + \" \" + endItem.oriTime + \":00\";\r\n      }\r\n      let endDate = new Date(this.endTime);\r\n      endDate.setMinutes(59);\r\n      if (isDiffOver2Hours(new Date(this.startTime), endDate)) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: \"身体再好，也不能太累哦！\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.time_box {\r\n  width: 750rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 20rpx;\r\n  box-sizing: border-box;\r\n  border-bottom: 2rpx solid #eee;\r\n\r\n  .time_item {\r\n    padding: 10rpx 0 0;\r\n    display: flex;\r\n    flex: 1;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    color: #353535;\r\n    font-size: 28rpx;\r\n\r\n    & > view:last-child {\r\n      margin-top: 7rpx;\r\n    }\r\n\r\n    .bottom_line {\r\n      height: 4rpx;\r\n      width: 200rpx;\r\n    }\r\n  }\r\n\r\n  .choose_item {\r\n    color: #e45f2b;\r\n    font-weight: 700;\r\n\r\n    .bottom_line {\r\n      height: 4rpx;\r\n      width: 200rpx;\r\n      background: #e45f2b;\r\n    }\r\n  }\r\n}\r\n\r\n.body_box {\r\n  margin: 0 30rpx;\r\n  display: grid;\r\n  padding-top: 20rpx;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  grid-row-gap: 20rpx;\r\n\r\n  .item_box {\r\n    margin-right: 10rpx;\r\n    // width: 150rpx;\r\n    height: 140rpx;\r\n    border: 2rpx solid #ddd;\r\n    border-radius: 10rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    font-size: 27rpx;\r\n\r\n    .time_text {\r\n      color: #333;\r\n      font-weight: 700;\r\n      margin-bottom: 10rpx;\r\n    }\r\n\r\n    .item_text1 {\r\n      font-size: 24rpx;\r\n\r\n      color: #666;\r\n    }\r\n  }\r\n\r\n  .choose_item {\r\n    background: #ff914d;\r\n    border: 2rpx solid #ff914d;\r\n    .time_text,\n    .item_text1 {\r\n      color: #fff;\r\n    }\r\n  }\r\n  .choose_item2 {\r\n    background: #333;\r\n    border: 2rpx solid #333;\r\n    .time_text,\r\n    .item_text1 {\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  .disable_itme {\r\n    color: #666;\r\n    border: 2rpx solid #999;\r\n    background: #ccc;\r\n  }\r\n}\r\n\r\n.info_box {\r\n  margin: 40rpx 30rpx 0;\r\n}\r\n\r\n.title_box {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  color: #333;\r\n  font-size: 30rpx;\r\n  padding: 0 15rpx;\r\n  box-sizing: border-box;\r\n  font-weight: 700;\r\n\r\n  .line {\r\n    width: 8rpx;\r\n    height: 30rpx;\r\n    border-radius: 12rpx;\r\n    background: #ff914d;\r\n    margin-right: 7rpx;\r\n  }\r\n}\r\n\r\n.but_box {\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  width: 750rpx;\r\n  position: fixed;\r\n  bottom: 50rpx;\r\n}\r\n.re_row {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 26rpx;\r\n  margin: 0 30rpx;\r\n  color: #999;\r\n  .re_row_item {\r\n    flex: 1;\r\n    text-align: center;\r\n    padding: 10rpx;\r\n    border-bottom: 2rpx solid #ccc;\r\n  }\r\n}\r\n.u-content {\r\n  margin: 0 20rpx;\r\n  font-size: 26rpx;\r\n  color: #333;\r\n}\r\n</style>\n","import mod from \"-!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay_reservation.vue?vue&type=style&index=0&id=77a41789&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay_reservation.vue?vue&type=style&index=0&id=77a41789&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1728478873404\n      var cssReload = require(\"C:/ide/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}